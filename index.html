<html>
  <head>
  </head>
  <body>
    <script type="text/javascript" src="reqwest.js"></script>
    <script type="text/javascript" src="bean.js"></script>
    <script>
    var app = {};
    app.options = {
        userId: 11543709,
        publisherApiToken: "9b31fd75b71f25351085924eb5ace793",
        framekiller: true,
        timerPageVisibilityChecking: true,
        metrics: {
            dataCollectorUrl: "//collector.shorte.st/interstitial-page-event",
            dataCollectorTimeout: "1000",
            dataCollectorEnabled: Boolean(0),
            leftLinkId: '#interstitial-left-link',
            rightLinkId: '#interstitial-right-link'
        },
        intermediate: {
            timeToWait: 5,
            timerDelay: 0,
            displayCaptcha: true,
            adsBlockerPolicy:  2,
            timerId: 'timer',
            skipButtonId: 'skip_button',
            advertisementContainerId: 'intermediate-ad',
            error : {
                elementId: 'intermediate_page_error',
                wrongTargetUrlMessage: "There was an error - a target URL is invalid. The Skip button will redirect you to the previous page or to the shorte.st main page.",
                generalMessage: "There was an error. Please refresh the page.",
                captchaErrorMessage: "reCAPTCHA error. Please refresh this page."
            },
            captchaDisplayMoment: 'beforeAdvertisementDisplay',
            captchaElementSelector: '#intermediate_captcha',
            captchaErrorElementSelector: '#captcha_errormsg',
            captchaWaitSelector: '#captcha_waitmsg',
            captchaInfoSelector: '#captcha_infomsg',
            captchaResponseFieldSelector: '#recaptcha_response_field',
            destinationUrl: '',
            waitText: "Please wait {0} seconds",
            pleaseWaitText: "Please wait"
        },
        captcha: {
            public_key: '6LeT9DEUAAAAAHSbpOoPCW9QnuWUwQ3FOFZh0Uu8'
        },
        adSessionNotifier: {
            callbackUrl: "/shortest-url/end-adsession",
            sessionId: "76e255f647899e5dad9f71c61d4d1e81c4e730ad",
            init: true
        },
        captchaNotifier: {
            callbackUrl: "/captcha/callback"
        },
        gaTracker: {
            setters: {
                gaServiceVersionDimensionSetter: 'setDimension',
                gaServiceUserIdSetter: 'setUserId',
                gaDimensionLocked: 'setDimension'
            },
            serviceVersionSetter: {
                version: '2022-02-28.0'
            },
            serviceUserIdSetter: {
                userId: 11543709            },
            dimensionUserLocked : {
                userLocked: 0            }
        },
        initializeModules: {
            'gaPageviewTracker': true
        },
        popUnderUrl:false,
        redirectBlocker: {
          noContentURL: "//shorte.st/no-content"
        }
    };
    </script>
    <script>
     function sleep(ms) {
  return new Promise((resolve) => {
    setTimeout(resolve, ms);
  });
}

app.intermediatePage = app.intermediatePage || {}, async function () {
      function i() {
        var t = (r = new Date).getDate(), e = r.getMonth() + 1, a = r.getFullYear(), i = r.getHours(), n = r.getMinutes(), r = r.getSeconds();
        return a.toString() + "-" + e.toString() + "-" + t.toString() + " " + i.toString() + ":" + n.toString() + ":" + r.toString();
      }
      app.intermediatePage.shortestAnalytics = {displayId: Math.random().toString(36).substring(2) + (new Date).getTime().toString(36)};
      var dispId = app.intermediatePage.shortestAnalytics
      reqwest({url: "https://analytics.shorte.st/displayed", method: "POST", data: JSON.stringify({display_id: dispId, timestamp: i(), language: "en-US",
      publisher_id: app.options.userId, publisher_api_token: app.options.publisherApiToken, interstitial_type: "page", referrer_url: "", shortest_url: "http://destyy.com/ea1LZN", shortest_url_hash: "ea1LZN",
      var1: "", var2: "", var3: "", var4: "", var5: ""})});
      await sleep(2650)
      reqwest({url: "https://ads.shorte.st/notify.php?key=2ea5b261f06ca771033a5fa9e22493f1&width=1024&height=768&ch=11543709&cp.dest_domain=google.com&cp.oid=11543709&cp.referrer=&cp.locked=0&cp.proxy=0&cp.quarantine_status=1&cp.vno=13&cp.enc_url=aKsMkuHZ9X3KrKjK5H9hU0VTgC9Yw67o5gLu3/s0N14=&cp.asid=7778d0595b06e3abe46f1c98268d32e0683a323e&title=&description=&keywords=&captcha_verified=0", method: "GET"});
      await sleep(7000)
      reqwest({url: "https://analytics.shorte.st/viewed", method: "POST", data: JSON.stringify({display_id: dispId, timestamp: i(), destination_url: "http://testy.io"})});
      //reqwest({url: n + "/captcha-displayed", method: "POST", data: JSON.stringify({display_id: dispId, timestamp: i()})});
    }();
    </script>
  </body>
</html>
